---
import HeaderNavLink from './HeaderNavLink.astro';
import siteConfig from '../data/site-config';
import CustomImage from './CustomImage.astro';
import SocialLink from './SocialLink.astro';

const primaryNavLinks = siteConfig.primaryNavLinks ?? [];

const { class: className } = Astro.props;
---

<div class="fixed top-0 left-0 w-full flex justify-between z-50 pt-6 px-4 sm:px-8 pointer-events-none">
    <header class:list={['pointer-events-auto flex w-full max-w-7xl mx-auto items-center justify-between gap-8 px-6 py-3 bg-white/70 backdrop-blur-xl shadow-lg shadow-slate-200/50 border border-white/50 rounded-full transition-all duration-300 hover:bg-white/95 hover:shadow-xl', className]}>
        {
            siteConfig.logo?.src ? (
                <a href="/">
                    <CustomImage class="max-h-12" {...siteConfig.logo} loading="eager" fetchpriority="high" />
                </a>
            ) : (
                <a class="text-xs font-bold text-slate-900 tracking-wide whitespace-nowrap" href="/">
                    {siteConfig.title}
                </a>
            )
        }
        {
            primaryNavLinks.length > 0 && (
                <div class="flex items-center justify-end gap-4 sm:gap-8">
                    <!-- Inline Navigation Menu -->
                    <nav class="flex items-center gap-1 sm:gap-2" aria-label="Desktop navigation">
                        {primaryNavLinks.filter(link => link.text !== 'Contact').map((link) => (
                            <HeaderNavLink
                                class="px-3 sm:px-4 py-2 text-sm font-bold tracking-wide transition-all duration-300 text-slate-600 rounded-full hover:bg-slate-100/80 hover:text-slate-900 hover:scale-105"
                                href={link.href}
                            >
                                {link.text}
                            </HeaderNavLink>
                        ))}
                        
                        {/* Contact Expanding Snackbar */}
                        <div class="group relative flex items-center">
                            <button
                                class="px-3 sm:px-4 py-2 text-sm font-bold tracking-wide transition-all duration-300 text-slate-600 rounded-full hover:bg-slate-100/80 hover:text-slate-900 group-hover:scale-105 peer z-10"
                            >
                                Contact
                            </button>
                            <div class="absolute right-0 top-1/2 -translate-y-1/2 flex items-center pr-2 translate-x-4 opacity-0 scale-95 pointer-events-none group-hover:opacity-100 group-hover:translate-x-full group-hover:scale-100 group-hover:pointer-events-auto transition-all duration-300 origin-left">
                                <div class="flex items-center gap-2 bg-white shadow-xl shadow-slate-200/50 border border-slate-100 px-3 py-1.5 rounded-full backdrop-blur-md">
                                    {siteConfig.socialLinks?.map((link) => (
                                        <SocialLink 
                                            {...link} 
                                            class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 text-slate-600 hover:bg-[var(--color-primary)] hover:text-white transition-all duration-300 hover:-translate-y-1" 
                                        />
                                    ))}
                                </div>
                            </div>
                        </div>
                    </nav>

                    <!-- Language Toggle -->
                    <div class="flex items-center gap-2 sm:gap-3 text-sm font-medium text-slate-700 sm:text-base border-l border-slate-300 pl-4 sm:pl-6 h-6">
                        <button class="px-2 py-1 rounded-md hover:bg-slate-100 transition-colors font-bold text-[var(--color-primary)]">KR</button>
                        <span class="text-slate-300">|</span>
                        <button class="px-2 py-1 rounded-md hover:bg-slate-100 transition-colors text-slate-500">EN</button>
                    </div>
                </div>
            )
        }
    </header>
</div>
